{% extends "base.html" %}
{% load comma_lists %}

{% block title %}
{{ sourcetext.title }}
{% endblock %}

{% block content %}

<h1 class="mt-4">
    {{ sourcetext.title }}
</h1>
<div class="card-deck">
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">Author</h5>
            <div class="card-text">
                {{ sourcetext.author.full_name }}
                <div class="float-right">
                    <a class="ml-3 btn btn-outline-secondary btn-sm"
                        href="{% url 'person_detail' sourcetext.author.id %}">
                        More
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">Original Language</h5>
            <div class="card-text">
                {{ sourcetext.language }}
            </div>
        </div>
    </div>
    {% if sourcetext.alternate_names.count %}
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">Other Titles</h5>
            {% if sourcetext.alternate_names.count > 1 %}
            <ul class="list-group list-group-flush">
                {% for a in sourcetext.alternate_names.all %}
                <li class="list-group-item">
                    {{ a.name }}
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <div class="card-text">
                {% for a in sourcetext.alternate_names.all %}
                {{ a.name }}
                {% endfor %}
            </div>
            {% endif %}
        </div>
    </div>
    {% endif %}
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">Format</h5>
            <div class="card-text">
                {{ sourcetext.get_kind_display }}
            </div>
        </div>
    </div>
    {% if sourcetext.date %}
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">Date</h5>
            <div class="card-text">
                {{ sourcetext.date }}
            </div>
        </div>
    </div>
    {% endif %}
</div>

{% if sourcetext.description %}
<h2 class="mt-4">Description</h2>
<p>
    {{ sourcetext.description }}
</p>
{% endif %}

<h2 class="mt-4">Translations</h2>
<table class="table table-striped">
    <thead>
        <tr>
            <th scope="col">Title</th>
            <th scope="col">Translator</th>
            <th scope="col">Publisher</th>
            <th scope="col">Date</th>
            <th scope="col">Language</th>
            <th scope="col">Type</th>
            <th scope="col">Introduction</th>
            <th scope="col">Notes</th>
            <th scope="col">Facing Text</th>
        </tr>
    </thead>
    <tbody>
        {% for t in translations.all %}
        <tr>
            <td><a href="{% url 'volume_detail' t.volume.id %}">{{ t.volume.title }}</a></td>
            <td>
                {% commalist t.persons.all %}
                <a href="{% url 'person_detail' item.id %}">{{ item.full_name }}</a>
                {% endcommalist %}
            </td>
            <td>{{ t.volume.publisher }}</td>
            <td>{% if t.volume.published_date %}{{ t.volume.published_date.year }}{% endif %}</td>
            <td>{{ t.language }}</td>
            <td>{{ t.get_kind_display }}</td>
            <td>{% if t.has_accompanying_introduction %}Yes{% else %}No{%endif%}</td>
            <td>{% if t.has_accompanying_notes %}Yes{% else %}No{%endif%}</td>
            <td>{% if t.has_facing_text %}Yes{% else %}No{%endif%}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% include "components/links_component.html" with links=sourcetext.links.all %}

{% endblock %}